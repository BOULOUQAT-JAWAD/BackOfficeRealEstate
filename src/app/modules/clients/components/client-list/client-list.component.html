<app-client-sidebar></app-client-sidebar>
<div class="content-wrapper">
    <div class="container-fluid">
        <ol class="breadcrumb">
            <li class="breadcrumb-item">
                <a href="#">Tableau de board</a>
            </li>
        </ol>
        <div class="card mb-3">
            <div class="card-header">
                <i class="fa fa-table"></i> Liste des Clients
            </div>

            <div class="card-body">
                <div class="table-responsive">
                  <table class="table table-bordered" width="100%" cellspacing="0">
                    <thead>
                      <tr>
                        <th>Client ID</th>
                        <th>Email</th>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>Phone Number</th>
                        <th>Activated</th>
                        <th>Subscribed</th>
                        <th>Actions</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let client of clients">
                        <td>{{ client.clientId }}</td>
                        <td>{{ client.email }}</td>
                        <td>{{ client.firstName }}</td>
                        <td>{{ client.lastName }}</td>
                        <td>{{ client.phoneNumber }}</td>
                        
                        <!-- Activation Status & Button -->
                        <td>
                          <span><strong>{{ client.activated ? 'Active' : 'Inactive' }}</strong></span>
                          <button 
                            (click)="toggleActivation(client)" 
                            class="btn btn-sm mx-1" 
                            [ngClass]="client.activated ? 'btn-danger' : 'btn-success'">
                            {{ client.activated ? 'Deactivate' : 'Activate' }}
                          </button>
                        </td>
              
                        <!-- Subscription Status and "Details" Button in the same cell -->
                        <td>
                          <span [ngClass]="client.clientSubscribed ? 'text-success' : 'text-danger'">
                            <strong>{{ client.clientSubscribed ? 'Yes' : 'No' }}</strong>
                          </span>
                          <br/>
                          <button 
                            (click)="viewSubscriptions(client.clientId)" 
                            class="btn btn-sm btn-primary mt-2">
                            View Details
                          </button>
                        </td>
              
                        <!-- Properties Button -->
                        <td>
                          <button (click)="viewProperties(client.clientId)" class="btn btn-sm btn-info mx-1">
                            View Properties
                          </button>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
              
        </div>
    </div>
</div>
